作用域是什么？
作用域是根据变量名查找变量的一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用LHS查询；如果目的是获取变量的值，就会使用RHS查询。

词法作用域是什么？
词法作用域是定义在词法阶段的作用域，换句话讲，词法作用域是在代码书写时就已经确定了的。

作用域的工作模型有几种？
两种： 词法作用域和 动态作用域。

词法作用域只会查找一级标识符。如果代码中引用了foo.bar.baz，词法作用域查找只会试图查找foo标识符，找到这个变量后，对象属性访问规则会分别接管对bar和baz属性的访问。





## JavaScript中的this

### this为什么有用？
`this` 机制提供了更优雅的方式来隐含地“传递”一个对象引用，导致更加干净的API设计和更容易的复用。

你的使用模式越复杂，你就会越清晰地看到：将执行环境作为一个明确参数传递，通常比传递 this 执行环境要乱。当我们探索对象和原型时，你将会看到一组可以自动引用恰当执行环境对象的函数是多么有用。

### 关于this的两个错误想法：
- 在一个函数中，this不等于函数自身
- 在一个函数中，this并不等同于函数的词法作用域；this 不会以任何方式指向函数的 **词法作用域**。作用域好像是一个将所有可用标识符作为属性的对象，这从内部来说是对的。但是 JavasScript 代码不能访问作用域“对象”。它是 引擎 的内部实现。

### this的正确的理解
`this` 不是编写时绑定，而是运行时绑定。它依赖于函数调用的上下文条件。this 绑定与函数声明的位置没有任何关系，而与函数被调用的方式紧密相连。

当一个函数被调用时，会建立一个称为执行环境的活动记录。这个记录包含函数是从何处（调用栈 —— call-stack）被调用的，函数是 如何 被调用的，被传递了什么参数等信息。这个记录的属性之一，就是在函数执行期间将被使用的 this 引用。

### 如何决定在函数执行期间 this 指向哪里

有四条规则：

1. 默认绑定（Default Binding）：独立函数调用。
2. 隐含绑定（Implicit Binding）
3. 显式绑定（Explicit Binding）
4. new 绑定（new Binding）

#### 默认绑定
可以认为这种 this 规则是在没有其他规则适用时的默认规则。

``` javascript
var a = 'root';

function foo(){
    var a = 'foo';
    console.log(this.a);
}

foo(); // 'root'
```
