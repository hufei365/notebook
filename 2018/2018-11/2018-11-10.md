# 数据埋点

> 前端也是半个产品!

## 什么是数据埋点？

对页面进行数据埋点，好比在页面某个地方打下标记，针对用户进行用户行为统计；而且用户对这些统计操作是无感知的。

## 数据埋点原理

简单来说，网站统计分析工具需要收集到用户浏览目标网站的行为（如打开某网页、点击某按钮、将商品加入购物车等）及行为附加数据（如某下单行为产生的订单金额等）。早期的网站统计往往只收集一种用户行为：页面的打开。而后用户在页面中的行为均无法收集。这种收集策略能满足基本的流量分析、来源分析、内容分析及访客属性等常用分析视角，但是，随着ajax技术的广泛使用及电子商务网站对于电子商务目标的统计分析的需求越来越强烈，这种传统的收集策略已经显得力不能及。

后来，Google在其产品谷歌分析中创新性的引入了可定制的数据收集脚本，用户通过谷歌分析定义好的可扩展接口，只需编写少量的javascript代码就可以实现自定义事件和自定义指标的跟踪和分析。目前百度统计、搜狗分析等产品均照搬了谷歌分析的模式。

其实说起来两种数据收集模式的基本原理和流程是一致的，只是后一种通过javascript收集到了更多的信息。下面看一下现在各种网站统计工具的数据收集基本原理。

## 数据统计类型

1. 访问数据
2. 性能数据
3. 点击数据
4. 异常数据
5. 其它数据

### 访问数据

- PV/UV：最基础的 PV（页面访问数量）、UV（独立访问用户数量）
- 页面来源：页面的 refer，可以定位页面的入口
- 操作系统：了解用户的 OS 状况，帮助分析用户群体的特征，特别是移动端，iOS 和 Android 的分布就更有意义了
- 浏览器：可以统计到各种浏览器的占比，对于是否继续兼容 IE6、新技术（HTML5、CSS3等）的运用等调研提供参考价值
- 分辨率：对页面设计提供参考，特别是响应式设计
- 登录率：百度也开始看重登陆，登陆用户具有更高的分析价值，引导用户登陆是非常重要的
- 地域分布：访问用户在地理位置上的分布，可以针对不同地域做运营、活动等
- 网络类型：wifi/3G/2G，为产品是否需要适配不同网络环境做决策
- 访问时段：掌握用户访问时间的分布，引导消峰填谷、节省带宽
- 停留时长：判断页面内容是否具有吸引力，对于需要长时间阅读的页面比较有意义
- 到达深度：和停留时长类似，例如百度百科，用户浏览时的页面到达深度直接反映词条的质量

【参考资料】

[网站统计中的数据收集原理及实现](http://blog.codinglabs.org/articles/how-web-analytics-data-collection-system-work.html)

[前端数据之美 -- 基础篇](http://fex.baidu.com/blog/2014/05/front_end-data/)